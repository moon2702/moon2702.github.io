<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux 命令 文件相关 | MOON</title><meta name="author" content="moon2702"><meta name="copyright" content="moon2702"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本篇记录了一些常用的Linux 文件相关命令的用法。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 命令 文件相关">
<meta property="og:url" content="http://moon2702.github.io/2024/07/30/Linux%20%E5%91%BD%E4%BB%A4%20%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/index.html">
<meta property="og:site_name" content="MOON">
<meta property="og:description" content="本篇记录了一些常用的Linux 文件相关命令的用法。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2024/07/21/l7A41mHsp9PDS6W.jpg">
<meta property="article:published_time" content="2024-07-30T12:54:52.000Z">
<meta property="article:modified_time" content="2024-08-08T08:06:25.143Z">
<meta property="article:author" content="moon2702">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2024/07/21/l7A41mHsp9PDS6W.jpg"><link rel="shortcut icon" href="/img/favicon-32x32-next.png"><link rel="canonical" href="http://moon2702.github.io/2024/07/30/Linux%20%E5%91%BD%E4%BB%A4%20%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux 命令 文件相关',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-08 16:06:25'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2024/07/21/l7A41mHsp9PDS6W.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2024/07/25/mkzJEb7GqutfaF3.png')"><nav id="nav"><span id="blog-info"><a href="/" title="MOON"><span class="site-name">MOON</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux 命令 文件相关</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2024-07-30T12:54:52.000Z" title="发表于 2024-07-30 20:54:52">2024-07-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%BB%8F%E5%8E%86/">学习经历</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="文件创建和使用"><a href="#文件创建和使用" class="headerlink" title="文件创建和使用"></a>文件创建和使用</h1><table>
<thead>
<tr>
<th>命令</th>
<th>命令作用</th>
<th>选项</th>
<th>选项作用</th>
</tr>
</thead>
<tbody><tr>
<td>mkdir [选项…] [目录路径]</td>
<td>创建目录</td>
<td>-p<BR>-v, –verbose<BR>-m<BR>…</td>
<td>创建多级不存在的目录<BR>显示每个创建的目录，用于调试和确认<BR>设置新目录的权限 例如 <code>mkdir -m 755 dirname</code></td>
</tr>
<tr>
<td>touch [选项…] [文件名]</td>
<td>创建文件<BR>修改时间戳</td>
<td>-a<BR>-m<BR>-d<BR>…</td>
<td>仅仅更新访问时间<BR>仅更新修改时间<BR>使用指定日期时间作为时间戳</td>
</tr>
<tr>
<td>cp [选项…] [源文件&#x2F;源文件…] [目标文件&#x2F;目标目录]</td>
<td>拷贝文件</td>
<td>-a<BR>-r<BR>…</td>
<td>归档模式，递归复制目录，并保留文件属性<BR>递归复制目录和内容</td>
</tr>
<tr>
<td>mv [选项…] [源文件&#x2F;源文件…] [目标文件&#x2F;目标目录]</td>
<td>移动文件<BR>重命名文件</td>
<td>-i<BR>-f<BR>-n<BR>…</td>
<td>覆盖前询问<BR>覆盖前不询问<BR>不覆盖已存在文件</td>
</tr>
<tr>
<td>rm [选项…] [文件…]</td>
<td>删除文件</td>
<td>-i<BR>-I<BR>-f<BR>-r<BR>-d<BR>…</td>
<td>删除文件时提示<BR>删除三个以上文件或递归删除时提示<BR>不提示<BR>递归删除<BR>删除空目录</td>
</tr>
<tr>
<td>shred [选项…] [文件…]</td>
<td>安全删除文件，一般不可恢复</td>
<td>-n<BR>-z<BR>-u<BR>-v<BR>…</td>
<td>覆盖文件次数，默认3<BR>覆盖结束后使用0填充<BR>覆盖后删除<BR>显示详情</td>
</tr>
</tbody></table>
<h1 id="文件查阅"><a href="#文件查阅" class="headerlink" title="文件查阅"></a>文件查阅</h1><table>
<thead>
<tr>
<th>命令</th>
<th>用法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>pwd</td>
<td>pwd</td>
<td>显示当前文件路径</td>
</tr>
<tr>
<td>cd</td>
<td>cd [路径]</td>
<td>跳转到指定目录下 <BR>- 上一个工作目录 ~ 用户家目录 <BR>目录中包含空格需要使用转义字符</td>
</tr>
<tr>
<td>nl</td>
<td>nl [文件名]</td>
<td>带行号显示文件内容</td>
</tr>
<tr>
<td>cat</td>
<td></td>
<td>查看文件的内容</td>
</tr>
<tr>
<td>head</td>
<td></td>
<td>显示文件前若干行内容</td>
</tr>
<tr>
<td>tail</td>
<td></td>
<td>显示文件后若干行内容</td>
</tr>
<tr>
<td>less</td>
<td></td>
<td>查看文件内容，并且支持搜索和跳转</td>
</tr>
<tr>
<td>find</td>
<td></td>
<td>通过一些条件定位符合要求的文件</td>
</tr>
</tbody></table>
<h2 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h2><p>用于在命令行中查看、合并和重定向输出。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat [文件...] # 默认输出文件全部内容</span><br><span class="line"></span><br><span class="line">cat [选项] [文件...] # 以一定格式输出文件内容</span><br><span class="line"></span><br><span class="line">cat &gt; [文件] # 在命令行中以覆盖方式输入内容到文件 | Crtl + d 结束输入 | &gt;&gt; 表示以追加方式输入内容到文件</span><br><span class="line"></span><br><span class="line">cat &gt; [文件1] [文件2] # 将文件2中的内容写入文件1</span><br><span class="line"></span><br><span class="line">cat [文件1] [文件2] &gt; [文件3] # 将文件1和文件2的内容输入到文件3中</span><br></pre></td></tr></table></figure>

<h3 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-A，–show-all</td>
<td>显示不可见字符、制表符和行尾符(等同-vET)</td>
</tr>
<tr>
<td>-b，–number-nonblank</td>
<td>对非空输出行编号</td>
</tr>
<tr>
<td>-e</td>
<td>显示不可见字符和行尾符(等同于-vE)</td>
</tr>
<tr>
<td>-E, –show-ends</td>
<td>在每行行尾显示 <code>$</code> 符号</td>
</tr>
<tr>
<td>-n, –number</td>
<td>对所有输出行编号</td>
</tr>
<tr>
<td>-s, –squeeze-blank</td>
<td>将连续的空白行压缩为单个空白行</td>
</tr>
<tr>
<td>-T, –show-tabs</td>
<td>将制表符显示为 <code>^I</code></td>
</tr>
<tr>
<td>-v, –show-nonprinting</td>
<td>使用 <code>^</code> 和 <code>M-</code> 符号显示不可见字符(除了制表符和行尾符)</td>
</tr>
</tbody></table>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示文件内容</span></span><br><span class="line">cat file.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示多个文件内容</span></span><br><span class="line">cat file.txt temp.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过输出重定向将多个文件进行合并</span></span><br><span class="line">cat file.txt temp.txt &gt; data.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将键盘输入重定向到某文件 | 将等待用户输入，输入内容被保存到指定文件中，结束按下 `Ctrl + D`</span></span><br><span class="line">cat &gt; file.txt</span><br></pre></td></tr></table></figure>

<h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><p>用于在命令行中查看文件的前若干行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">head [文件...] # 默认显示前10行内容</span><br><span class="line"></span><br><span class="line">head [选项] [文件...] # 指定输出内容格式 | 例如行数、字节数等</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-1"><a href="#常用选项-1" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-n [K]</td>
<td>显示文件的前K行，默认前10行</td>
</tr>
<tr>
<td>-c [K]</td>
<td>显示文件的前K个字节</td>
</tr>
<tr>
<td>-q</td>
<td>多个文件时不输出文件名</td>
</tr>
<tr>
<td>-v</td>
<td>总是输出文件名</td>
</tr>
</tbody></table>
<h3 id="举例-1"><a href="#举例-1" class="headerlink" title="举例"></a>举例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示文件前10行</span></span><br><span class="line">head file.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">显示多个文件前3行</span></span><br><span class="line">head -n 3 file.txt temp.txt</span><br></pre></td></tr></table></figure>

<h3 id="n-和-c-选项的使用"><a href="#n-和-c-选项的使用" class="headerlink" title="-n 和-c 选项的使用"></a>-n 和-c 选项的使用</h3><ul>
<li>K如果是负数时，表示输出除了最后K行(字节)以外的所有行(字节)。</li>
<li>-c 选项中，K后面可以使用 <code>*</code> 运算符：b 512, kB 1000, K 1024, MB 1000*1000, M 1024*1024, GB 1000*1000*1000, G 1024*1024*1024, 对于T, P, E, Z, Y 同样适用。</li>
</ul>
<h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><p>用于在命令行中查看文件的末尾若干行，通常用于查看文件的最后几行内容，特别是日志文件或者其他追加内容。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tail [文件...] # 默认输出最后10行内容</span><br><span class="line"></span><br><span class="line">tail [选项] [文件...] # 指定输出内容规格 | 例如行数、捕获新增内容等</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-2"><a href="#常用选项-2" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-n [K]</td>
<td>显示文件的前K行，默认前10行</td>
</tr>
<tr>
<td>-c [K]</td>
<td>显示文件的前K个字节</td>
</tr>
<tr>
<td>-f，–follow[&#x3D;{name|descriptor}]</td>
<td>跟踪文件增长，显示新增内容，用于日志</td>
</tr>
<tr>
<td>-F</td>
<td>类似于-f，但在文件旋转时尝试跟踪新文件<BR>相当于 <code>--follow=name --retry</code></td>
</tr>
<tr>
<td>-q</td>
<td>多个文件时不输出文件名</td>
</tr>
<tr>
<td>-v</td>
<td>总是输出文件名</td>
</tr>
<tr>
<td>–retry</td>
<td>用于初始文件无法访问时，让 <code>tail</code> 尝试重新打开文件，常常和 <code>--follow=name</code> 一起使用</td>
</tr>
</tbody></table>
<h3 id="举例-2"><a href="#举例-2" class="headerlink" title="举例"></a>举例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">实时显示文件的新增内容，默认10行</span></span><br><span class="line">tail -f example.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">实时显示文件新增内容，指定20行</span></span><br><span class="line">tail -n 20 -f example.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过文件名来跟踪文件。如果文件被重命名或移动，`<span class="built_in">tail</span>` 会尝试继续跟踪新的文件。</span></span><br><span class="line">tail --follow=name --retry example.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过文件描述符来跟踪文件，如果文件被重命名或移动，仍然跟踪原文件</span></span><br><span class="line">tail --follow=descriptor example.log</span><br></pre></td></tr></table></figure>

<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ol>
<li>文件旋转指的是什么？<br> 文件旋转指的是指的是在持续写入日志或其他数据的文件时，定期或根据特定条件对文件进行重命名、压缩或清理的过程。这个过程的目的是管理文件大小，避免文件变得过大而影响系统性能或占用过多存储空间。<BR></li>
<li><code>--follow=&#123;name|descriptor&#125;</code>的使用：<ul>
<li>name：跟踪文件名，原文件重命名或移动之后，不再跟踪原文件，跟踪新的同名文件。</li>
<li>descriptor：跟踪文件描述符，即使原文件重命名或者移动，仍然跟踪原文件。</li>
</ul>
</li>
</ol>
<h2 id="less"><a href="#less" class="headerlink" title="less"></a>less</h2><p>用于便捷的查看文件内容，允许用户向前或者向后浏览内容，并支持搜索和跳转。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">less [文件...] # 默认方式查看文件</span><br><span class="line"></span><br><span class="line">less [选项] [文件...] # 指定规格查看文件 | 例如显示行号、搜索忽略大小写等</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-3"><a href="#常用选项-3" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-N</td>
<td>显示行号</td>
</tr>
<tr>
<td>-i</td>
<td>忽略搜索时的大小写</td>
</tr>
<tr>
<td>-S</td>
<td>禁止折行显示长行，而是水平滚动查看</td>
</tr>
</tbody></table>
<h3 id="浏览操作"><a href="#浏览操作" class="headerlink" title="浏览操作"></a>浏览操作</h3><ul>
<li>移动和浏览<ul>
<li><code>空格</code>：向下滚动一页</li>
<li><code>b</code>：向上滚动一页</li>
<li><code>j</code>：向下滚动一行</li>
<li><code>k</code>：向上滚动一行</li>
<li><code>G</code>：移动到文件末尾</li>
<li><code>g</code>：移动到文件开头</li>
<li><code>Ctrl f</code>：向下滚动一屏</li>
<li><code>Ctrl b</code>：向上滚动一屏</li>
</ul>
</li>
<li>搜索<ul>
<li><code>/pattern</code>：向前搜索 <code>pattern</code></li>
<li><code>?pattern</code>：向后搜索 <code>pattern</code></li>
<li><code>n</code>：向前重复前一次搜索动作</li>
<li><code>N</code>：向后重复前一次搜索动作</li>
</ul>
</li>
<li>退出<ul>
<li><code>q</code>：退出 <code>less</code></li>
</ul>
</li>
</ul>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>通过多种条件来定位和查找文件，并支持执行对文件的操作。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">find # 默认输出当前目录下的所有文件 | 递归操作</span><br><span class="line"></span><br><span class="line">find [指定目录] # 输出指定目录下的所有文件</span><br><span class="line"></span><br><span class="line">find [指定目录] [选项] # 按照一定规则查找文件 | 例如递归深度、文件名、文件大小、文件权限等</span><br><span class="line"></span><br><span class="line">find [指定目录] [选项] [具体操作] # 找到文件之后追加的操作 | 例如删除文件、指定具体命令</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-4"><a href="#常用选项-4" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-name</td>
<td>按照文件名查找，支持通配符</td>
</tr>
<tr>
<td>-type</td>
<td>按照文件类型查找</td>
</tr>
<tr>
<td>-size</td>
<td>按照文件大小查找</td>
</tr>
<tr>
<td>-perm</td>
<td>按照指定权限查找</td>
</tr>
<tr>
<td>-user</td>
<td>按照文件所有者查找</td>
</tr>
<tr>
<td>-group</td>
<td>按照文件所有组查找</td>
</tr>
<tr>
<td>-maxdepth</td>
<td>指定查找深度</td>
</tr>
<tr>
<td>-mtime</td>
<td>按照修改时间查找</td>
</tr>
<tr>
<td>-atime</td>
<td>按照访问时间查找</td>
</tr>
<tr>
<td>-ctime</td>
<td>按照创建时间来查找</td>
</tr>
<tr>
<td>-prune</td>
<td>忽略某个目录</td>
</tr>
<tr>
<td>-follow</td>
<td>跟踪链接符号文件指向的文件</td>
</tr>
<tr>
<td>-and -or -not</td>
<td>通过逻辑运算符将多个条件结合</td>
</tr>
</tbody></table>
<h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><table>
<thead>
<tr>
<th>操作</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-exec command {} +</td>
<td>执行指定命令处理查询到的文件</td>
</tr>
<tr>
<td>-delete</td>
<td>直接删除查询到的文件</td>
</tr>
</tbody></table>
<h3 id="举例-3"><a href="#举例-3" class="headerlink" title="举例"></a>举例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示删除当前目录以及子目录下所有.<span class="built_in">log</span>文件</span></span><br><span class="line">find . -name &quot;*.log&quot; -exec rm &#123;&#125; + </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示查询当前目录下的目录文件 | f: 普通文件 d: 目录 l: 链接文件</span> </span><br><span class="line">find . -type d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示查询data目录下大于100MB的文件并删除 | +100M: 100M以上 -100M: 100M以下 100M: 等于100M</span> </span><br><span class="line">find ./data -size +100M -delete </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示查询rwxrwxrwx权限的文件 | /777: 9个权限相或 -777: 对象权限相与 777: 等于777</span></span><br><span class="line">find . -perm 777</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示查询network中的cpp文件，递归深度为2</span></span><br><span class="line">find ./network -maxdepth 2 -name &quot;*.cpp&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示查找修改时间为5天以上的文件 | +5: 5天以上 -5: 5天以内 5: 等于5天</span></span><br><span class="line">find . -mtime +5 </span><br></pre></td></tr></table></figure>

<h3 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h3><ol>
<li>文件系统的权限<br> 在Linux系统中，将文件操作对象分为 3 类，即文件所有者、群组和其他对象，对于某一文件，这 3 类对象分别有不同的操作权限。<br> 这其中包括读(r)、写(w)和执行(x)权限，因此对于一个文件，每类用户权限都有 8 种状态，可以使用 3 个八进制数来代表 3 类用户的权限。例如 <code>777</code> 表示 <code>rwxrwxrwx</code>，因此 <code>chmod 777 [文件名]</code> 表示设置某文件对所有用户都具有读写和执行权限。 <!-- ![Clip_2024-07-31_19-14-22.png](https://s2.loli.net/2024/07/31/1eAvYlSL7HBCx68.png) -->
<BR></li>
<li><code>find -perm -[权限]</code> 和 <code>find -perm /[权限]</code> 的区别<br> 首先在一个文件夹中存在以下文件：<br> <img src="https://s2.loli.net/2024/07/31/cy5tADFIUQWKXfd.png" alt="Clip_2024-07-31_19-27-57.png"><br> 我们使用 <code>find -perm -[权限]</code> 和 <code>find -perm /[权限]</code> 进行对比<br> <img src="https://s2.loli.net/2024/07/31/OGAS6KdcPXTfjup.png" alt="Clip_2024-07-31_19-31-20.png"><br> <img src="https://s2.loli.net/2024/07/31/mnhC7pZIBJK95wS.png" alt="Clip_2024-07-31_19-33-10.png"><br> 可以看到 <code>-[权限]</code> 指的是 3 种文件操作者权限相与的最小值，例如 <code>-311</code> 表示查询 &#x3D;&#x3D;文件所有者至少有写和执行权限&#x3D;&#x3D; &amp;&amp; &#x3D;&#x3D;组对象至少有执行权限&#x3D;&#x3D; &amp;&amp; &#x3D;&#x3D;其他对象至少有执行权限&#x3D;&#x3D; 的文件；而 <code>/[权限]</code> 则指的是列出的权限至少满足 1 种（9 种权限相或），例如 <code>/751</code> 表示查询 &#x3D;&#x3D;文件所有者拥有读或者写或者执行权限&#x3D;&#x3D; || &#x3D;&#x3D;组对象拥有读或者执行权限&#x3D;&#x3D; || &#x3D;&#x3D;其他成员拥有执行权限&#x3D;&#x3D;。</li>
</ol>
<h1 id="文件统计"><a href="#文件统计" class="headerlink" title="文件统计"></a>文件统计</h1><table>
<thead>
<tr>
<th>命令</th>
<th>用法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>stat</td>
<td>stat [文件名]</td>
<td>查看文件详细信息</td>
</tr>
<tr>
<td>du</td>
<td>du -sh [目录路径]</td>
<td>查看目录大小 s表示汇总 h表示高可读性</td>
</tr>
<tr>
<td>ls</td>
<td>ls -al</td>
<td>查看当前目录下的文件信息</td>
</tr>
<tr>
<td>grep</td>
<td></td>
<td>在目标文件匹配符合要求的行</td>
</tr>
<tr>
<td>awk</td>
<td></td>
<td>在目标文件匹配符合要求的行</td>
</tr>
<tr>
<td>sed</td>
<td></td>
<td>用于命令行的文本编辑，查找、替换、插入、删除</td>
</tr>
<tr>
<td>wc</td>
<td>wc</td>
<td>获取文件统计，例如字符数、行数</td>
</tr>
<tr>
<td>sort</td>
<td>sort [文件名]</td>
<td>对该文件中的行进行排序</td>
</tr>
</tbody></table>
<h2 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h2><p>用于展示目录内容的基本命令，显示目录下的文件和子目录。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ls # 输出当前目录下的文件</span><br><span class="line"></span><br><span class="line">ls [路径...] # 输出该路径下的文件信息 | 如果不是路径，而是一个文件的话，输出该文件信息</span><br><span class="line"></span><br><span class="line">ls [选项...] [路径...] # 输出指定信息</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-5"><a href="#常用选项-5" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-a</td>
<td>显示所有文件</td>
</tr>
<tr>
<td>-l</td>
<td>使用长格式文件详细信息，例如权限、所有者、文件大小、修改日期</td>
</tr>
<tr>
<td>-h</td>
<td>高可读的显示文件大小</td>
</tr>
<tr>
<td>-r</td>
<td>反向排序输出结果</td>
</tr>
<tr>
<td>-t</td>
<td>按照修改时间对文件进行排序，新修改在前</td>
</tr>
<tr>
<td>-R</td>
<td>递归列出子目录和内容，建议使用tree命令来显示目录层级</td>
</tr>
<tr>
<td>-d</td>
<td>列出目录本身，而不是内容</td>
</tr>
<tr>
<td>-1</td>
<td>每行只显示一个文件或者目录</td>
</tr>
</tbody></table>
<h3 id="举例-4"><a href="#举例-4" class="headerlink" title="举例"></a>举例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列出当前目录下文件的详细状况 | ll 作用等同于 <span class="built_in">ls</span> -l</span></span><br><span class="line">ll</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列出当前目录中的所有目录，不显示其内容</span></span><br><span class="line">ls -d */</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列出当前目录下network目录中所有文件，并且高可读显示文件大小</span></span><br><span class="line">ls -alh ./network</span><br></pre></td></tr></table></figure>

<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><p>用于文件中的搜索匹配的文本，支持正则表达式并打印匹配的行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grep [模式] [文件名...] # 打印符合模式的行</span><br><span class="line"></span><br><span class="line">grep [选项...] [模式] [文件名...] # 配置一些选项进行匹配 | 例如忽略大小写、使用正则表达式等</span><br><span class="line"></span><br><span class="line">[其他命令] | grep [模式] # 将其他命令的输出，作为grep的匹配对象</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-6"><a href="#常用选项-6" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>-v</td>
<td>反转匹配，显示不包含模式的行</td>
</tr>
<tr>
<td>-r</td>
<td>递归搜索目录中的文件</td>
</tr>
<tr>
<td>-l</td>
<td>显示匹配的文件名，不显示行</td>
</tr>
<tr>
<td>-L</td>
<td>显示不包含匹配模式的文件名</td>
</tr>
<tr>
<td>-n</td>
<td>显示匹配行的行号</td>
</tr>
<tr>
<td>-c</td>
<td>只显示匹配的行数</td>
</tr>
<tr>
<td>-o</td>
<td>只显示匹配的部分</td>
</tr>
<tr>
<td>-E</td>
<td>使用扩展正则表达式</td>
</tr>
<tr>
<td>-W</td>
<td>匹配整个单词</td>
</tr>
<tr>
<td>-x</td>
<td>匹配整行</td>
</tr>
<tr>
<td>–color</td>
<td>输出中高亮显示匹配的文本</td>
</tr>
</tbody></table>
<h3 id="问题-2"><a href="#问题-2" class="headerlink" title="问题"></a>问题</h3><ol>
<li>正则表达式：指的是一种用来描述字符串模式的表达式，常用于文本处理中。<a target="_blank" rel="noopener" href="https://tool.oschina.net/uploads/apidocs/jquery/regexp.html">正则表达式语法</a><ul>
<li><code>^pattern</code>：用于匹配 <code>pattern</code> 为首的行。</li>
<li><code>pattern$</code>：用于匹配 <code>pattern</code> 结尾的行。</li>
<li><code>p.ttern</code>：<code>.</code>表示任意字符。<BR></li>
</ul>
</li>
<li>管道符：<code>grep</code> 通常用于结合管道符来使用，将一个命令的输出作为 <code>grep</code> 的匹配对象。<ul>
<li><code>ps -aux | grep &quot;nginx&quot;</code>：系统进程，筛选出包含 “nginx” 的行。</li>
<li><code>tail file.log | grep &quot;error&quot; | sort</code>：日志文件，筛选出 “error” 的行，并排序。</li>
<li><code>grep &quot;error&quot; /var/log/syslog | grep &quot;$(date +&quot;%b %e %H&quot; -d &quot;1 hour ago&quot;)&quot;</code>：过滤出系统日志中的错误消息，然后使用当前时间减去1小时的格式来进一步过滤1小时内的错误消息。</li>
</ul>
</li>
</ol>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p>用于文本处理和数据分析，具有较强的灵活性和文本处理能力，适合处理结构化数据，例如表格、日志文件等。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;[&#123;动作&#125;]&#x27; [文件名...] # 默认匹配所有行</span><br><span class="line"></span><br><span class="line">awk &#x27;[/模式/] [&#123;动作&#125;]&#x27; [文件名...] # 匹配符合模式的行</span><br><span class="line"></span><br><span class="line">awk [选项] &#x27;[/模式/] [&#123;动作&#125;]&#x27; [文件名...] # 指定一些规则 | 例如分隔符、awk文件、设置变量</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-7"><a href="#常用选项-7" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-f [awk程序文件]</td>
<td>指定awk程序对文件进行处理</td>
</tr>
<tr>
<td>-F [‘符号’]</td>
<td>指定输入字符分隔符 <code>awk -F &#39;,&#39; ...</code></td>
</tr>
<tr>
<td>-v [var&#x3D;val]</td>
<td>将变量 <code>var</code> 设置值为 <code>val</code></td>
</tr>
</tbody></table>
<h3 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h3><table>
<thead>
<tr>
<th>模式</th>
<th>举例</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>正则表达式</td>
<td>awk ‘&#x2F;^J&#x2F;‘ filename</td>
<td>用于匹配包含特定文本的行</td>
</tr>
<tr>
<td>关系运算符</td>
<td>awk ‘$2 &lt; 10’ filename</td>
<td>用于范围匹配</td>
</tr>
<tr>
<td>BEGIN&#x2F;END</td>
<td>awk ‘BEGIN {print “BEGIN”}’ filename</td>
<td>特殊模式，用于指定输入前后执行的操作</td>
</tr>
</tbody></table>
<h3 id="动作"><a href="#动作" class="headerlink" title="动作"></a>动作</h3><table>
<thead>
<tr>
<th>动作</th>
<th>举例</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>print</td>
<td>awk ‘{print}’ filename</td>
<td>打印指定内容</td>
</tr>
<tr>
<td>表达式计算</td>
<td>awk ‘{sum +&#x3D; $2}’ filename</td>
<td>对数据进行简单运算</td>
</tr>
<tr>
<td>赋值</td>
<td>awk ‘{OFS&#x3D;”\t”}’ filename</td>
<td>对变量赋值</td>
</tr>
<tr>
<td>内置函数</td>
<td><code>length</code> <code>substr</code> <code>toupper</code> <code>tolower</code></td>
<td>将具体操作封装成函数</td>
</tr>
</tbody></table>
<h3 id="字段和记录"><a href="#字段和记录" class="headerlink" title="字段和记录"></a>字段和记录</h3><p>awk 将每一行称为一条记录，每一列成为一个字段，默认情况下，字段使用空格或者制表符分隔，可以使用 <code>-F</code> 选项自己指定分隔符。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>$0，$1，$2，$3...</code></td>
<td>0表示整行,其他数字分别表示具体字段</td>
</tr>
<tr>
<td><code>NF</code></td>
<td>当前行的字段数</td>
</tr>
<tr>
<td><code>NR</code></td>
<td>当前记录的行数</td>
</tr>
</tbody></table>
<h3 id="内置变量和函数"><a href="#内置变量和函数" class="headerlink" title="内置变量和函数"></a>内置变量和函数</h3><ol>
<li>变量<ul>
<li><code>FS</code>：输入字段分隔符（默认空格&#x2F;制表符）。</li>
<li><code>OFS</code>：输出字段分隔符（默认空格）。</li>
<li><code>RS</code>：输入记录分隔符（默认换行符）。</li>
<li><code>ORS</code>：输出记录分隔符（默认换行符）。</li>
</ul>
</li>
<li>函数<ul>
<li><code>length(s)</code>：返回字符串长度。</li>
<li><code>substr(s, start, length)</code>：返回字符串从 <code>start</code> 位置开始的子串，长度为 <code>length</code>。</li>
<li><code>toupper(s)</code>：将字符串转换为大写。</li>
<li><code>tolower(s)</code>：将字符串转换为小写。</li>
<li><code>sin(x)、cos(x)、sqrt(x)、log(x)</code>：数学相关函数。</li>
<li><code>systime()</code>：返回当前时间戳。</li>
</ul>
</li>
</ol>
<h3 id="控制结构"><a href="#控制结构" class="headerlink" title="控制结构"></a>控制结构</h3><ol>
<li>awk支持常见的控制结构，条件控制和循环控制：<ul>
<li>条件：<code>if (condition) &#123;action&#125; else &#123;action&#125;</code></li>
<li>循环：<code>while (condition) &#123;action&#125;</code> <code>for (i = 0; i &lt; n; ++i) &#123;action&#125;</code></li>
</ul>
</li>
</ol>
<h3 id="举例-5"><a href="#举例-5" class="headerlink" title="举例"></a>举例</h3><p>假设我们存在这样一组数据</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">John,25,Male,Engineer</span><br><span class="line">Alex,30,Female,Doctor</span><br><span class="line">Jane,30,Female,Doctor</span><br><span class="line">Doe,22,Male,Artist</span><br><span class="line">Geo,30,Female,Doctor</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">准确匹配，打印所有包含 <span class="string">&quot;John&quot;</span> 的行</span></span><br><span class="line">awk &#x27;/John/&#x27; data.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">范围匹配，打印从包含 <span class="string">&quot;John&quot;</span> 的行到包含 <span class="string">&quot;Doe&quot;</span> 的行 | 两次匹配均匹配首次出现关键字的行</span></span><br><span class="line">awk &#x27;/John/,/Doe/&#x27; data.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">正则表达式匹配，打印所有以 <span class="string">&quot;J&quot;</span> 为首的行</span></span><br><span class="line">awk &#x27;/^J/&#x27; data.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关系表达式匹配，打印第二列元素大于25的行 | 元素按照 <span class="string">&quot;,&quot;</span> 分隔每列</span></span><br><span class="line">awk -F &#x27;,&#x27; &#x27;$2 &gt; 25&#x27; data.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">组合匹配，使用 `&amp;&amp;` 连接两个条件，打印同时满足两个条件的行</span></span><br><span class="line">awk -F &#x27;,&#x27; &#x27;$2 &gt; 25 &amp;&amp; $3 == &quot;Female&quot;&#x27; data.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">通过一定格式输出，打印开始标志，修改输出分隔符</span></span><br><span class="line">awk -F &#x27;,&#x27; &#x27;BEGIN &#123; print &quot;Starts&quot;; OFS=&quot;\t&quot; &#125; &#123; print $1, $2, $3, $4 &#125;&#x27; text.txt</span><br><span class="line">awk -F &#x27;,&#x27; &#x27;BEGIN &#123; print &quot;Starts&quot;; OFS=&quot;\t&quot; &#125; &#123; for (i = 1; i &lt;= NF; i++) printf(&quot;%s%s&quot;, $i, (i&lt;NF ? OFS : &quot;\n&quot;)) &#125;&#x27; text.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">计算所有人的年龄并输出</span></span><br><span class="line">awk -F &#x27;,&#x27; &#x27;BEGIN &#123; print &quot;Starts&quot;; sum = 0&#125; &#123; sum += $2 &#125; END &#123; print &quot;Sum:&quot;, sum &#125;&#x27; text.txt</span><br></pre></td></tr></table></figure>

<h3 id="问题-3"><a href="#问题-3" class="headerlink" title="问题"></a>问题</h3><ol>
<li><code>BEGIN</code> 和 <code>END</code> 的使用<ul>
<li>在 <code>awk</code> 中，<code>BEGIN</code> 块在处理任何输入行之前执行，而 <code>END</code> 块在处理完所有输入行之后执行。由于在 <code>BEGIN</code> 块执行时，还没有读取任何输入数据，因此在BEGIN中使用 <code>$1</code> <code>$2</code> 是未定义行为，打印时将输出空值。同样，在 <code>END</code> 块之后不能再通过 <code>&#123;&#125;</code> 打印其他输出。</li>
<li><code>BEGIN</code> 块中的代码在任何输入文本行处理之前执行。通常用于初始化或打印表头等。</li>
<li><code>END</code> 块中的代码在所有输入文本行处理之后执行。通常用于打印总结信息或清理工作。</li>
</ul>
</li>
</ol>
<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><p>用于文本处理，对文件或输入流中的文本进行非交互式编辑，能够进行查找和替换、插入和删除（行）或者其他形式的文本操作。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;脚本&#x27; [文件名...]</span><br><span class="line"></span><br><span class="line">sed [选项...] &#x27;脚本&#x27; [文件名...]</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-8"><a href="#常用选项-8" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-e</td>
<td>直接在命令行中添加需要执行的 <code>sed</code> 脚本</td>
</tr>
<tr>
<td>-f</td>
<td>从指定文件中获取 <code>sed</code> 脚本</td>
</tr>
<tr>
<td>-i[SUFFIX]</td>
<td>直接编辑文件，可选择性备份</td>
</tr>
<tr>
<td>-n</td>
<td>取消默认输出，通常和 <code>p</code> 脚本一起使用打印特定行</td>
</tr>
</tbody></table>
<h3 id="常用脚本"><a href="#常用脚本" class="headerlink" title="常用脚本"></a>常用脚本</h3><table>
<thead>
<tr>
<th>脚本</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>s&#x2F;old_text&#x2F;new_text&#x2F;g</td>
<td>替换操作</td>
</tr>
<tr>
<td>[x]s&#x2F;old_text&#x2F;new_text&#x2F;</td>
<td>单行替换操作</td>
</tr>
<tr>
<td>s&#x2F;foo&#x2F;bar&#x2F;Ig</td>
<td>替换并忽略大小写</td>
</tr>
<tr>
<td>&#x2F;pattern_to_match&#x2F;d</td>
<td>删除操作</td>
</tr>
<tr>
<td>[x]i\inserted_line</td>
<td>插入操作（在x行插入）</td>
</tr>
<tr>
<td>[x]a\appended_line</td>
<td>追加操作（在x行追加）</td>
</tr>
<tr>
<td>&#x2F;pattern&#x2F;p</td>
<td>匹配行</td>
</tr>
</tbody></table>
<h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><p>统计文件内容信息，例如行数，单词数，字节数等。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wc [文件名...] # 使用默认方式统计 | 对字节、单词、行进行统计</span><br><span class="line"></span><br><span class="line">wc [选项...] [文件名...] # 指定统计的数据</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-9"><a href="#常用选项-9" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-l</td>
<td>显示行数</td>
</tr>
<tr>
<td>-w</td>
<td>显示单词数</td>
</tr>
<tr>
<td>-c</td>
<td>显示字节数</td>
</tr>
<tr>
<td>-m</td>
<td>显示字符数</td>
</tr>
<tr>
<td>-L</td>
<td>显示最长行的长度，统计字符数</td>
</tr>
</tbody></table>
<p>如果同时统计以上所有项目，则根据 行数、单词数、字符数、字节数、最长行长度、文件名 进行排列。<br><img src="https://s2.loli.net/2024/08/02/Q2qWnVGt3pTKSiN.png" alt="Clip_2024-08-02_16-59-41.png"></p>
<h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><p>用于文件内容排序的命令行工具，对文本中的行进行排序，提供多种选项控制排序行为。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sort [文件名...] # 使用默认方式排序并输出</span><br><span class="line"></span><br><span class="line">sort [选项...] [文件名...] # 指定一些操作来进行排序 | 例如逆序、根据指定字段排序</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-10"><a href="#常用选项-10" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-b</td>
<td>忽略每行前面的空白字符</td>
</tr>
<tr>
<td>-d</td>
<td>使用字典序</td>
</tr>
<tr>
<td>-f</td>
<td>忽略大小写差异</td>
</tr>
<tr>
<td>-g</td>
<td>根据通用数值排序</td>
</tr>
<tr>
<td>-i</td>
<td>忽略非打印字符</td>
</tr>
<tr>
<td>-M</td>
<td>按照月份排序</td>
</tr>
<tr>
<td>-n</td>
<td>按照数值排序</td>
</tr>
<tr>
<td>-r</td>
<td>逆序排序</td>
</tr>
<tr>
<td>-k</td>
<td>按照指定字段排序，通常和 <code>-t</code> 一起使用</td>
</tr>
<tr>
<td>-t</td>
<td>指定字段分隔符，如果没有指定，默认为 <code>&quot; &quot;</code></td>
</tr>
<tr>
<td>-u</td>
<td>对重复的行进行整合</td>
</tr>
</tbody></table>
<h3 id="问题-4"><a href="#问题-4" class="headerlink" title="问题"></a>问题</h3><ol>
<li>关于 <code>-k</code> 的用途<ul>
<li>首先如果没有指定分隔符，默认使用 <code>&quot; &quot;</code> 作为分隔符。</li>
<li><code>-k，--key=POS1[,POS]</code>：表示排序的字段从 <code>POS1</code> 到 <code>POS2</code> ，如果只指定了 <code>POS1</code> ，表示从该字段开始，到行结束。</li>
<li><code>sort -k 1,2 text.txt</code> 表示按照第1字段到第2字段（包含第1和第2字段）排序。首先根据第1字段排序，如果第1字段相同，则根据第2字段排序。</li>
<li><img src="https://s2.loli.net/2024/08/02/e4b59OxFBLVlMnh.png" alt="Clip_2024-08-02_21-54-56.png"></li>
<li>其中 <code>POS</code> 后还可以添加一些选项来对某些特定字段进行特殊化排序。</li>
<li><code>sort -k 1,1 -k 2nr,2nr text.txt</code> 表示第1字段按照字典序排序，第2字段按照数值逆序排序。</li>
<li><img src="https://s2.loli.net/2024/08/03/qSV9xHhg1Bka6vT.png" alt="Clip_2024-08-03_09-26-04.png"></li>
</ul>
</li>
<li>关于 <code>-t</code> 和 <code>-k</code> 的结合使用<ul>
<li><code>-t</code> 用来设置分隔符号，<code>-k</code>用来指定具体的排序区域。</li>
<li><img src="https://s2.loli.net/2024/08/02/jlVJ17SQevWBiyI.png" alt="Clip_2024-08-02_21-37-59.png"></li>
</ul>
</li>
</ol>
<h1 id="文件权限管理"><a href="#文件权限管理" class="headerlink" title="文件权限管理"></a>文件权限管理</h1><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>chmod</td>
<td>设置指定文件权限</td>
</tr>
<tr>
<td>umask</td>
<td>查看和修改默认权限掩码</td>
</tr>
</tbody></table>
<h2 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod [权限配置] [文件名...] # 通过默认方式配置权限</span><br><span class="line"></span><br><span class="line">chmod [选项] [权限配置] [文件名...] # 指定选项配置文件</span><br></pre></td></tr></table></figure>

<h3 id="常用选项-11"><a href="#常用选项-11" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-R<BR>–recursive</td>
<td>递归更改文件和目录权限</td>
</tr>
<tr>
<td>–reference&#x3D;[指定文件]</td>
<td>将文件权限设置和指定文件一致</td>
</tr>
</tbody></table>
<h3 id="权限描述"><a href="#权限描述" class="headerlink" title="权限描述"></a>权限描述</h3><p>权限描述分为数字形式和符号形式，数字形式使用三个8进制数字来表示三种不同文件访问对象的权限，在此不过多赘述，主要谈谈符号形式。</p>
<p>符号形式使用四种符号来描述访问对象：</p>
<ul>
<li>u：表示文件所有者。</li>
<li>g：表示组成员对象。</li>
<li>o：表示其他成员对象。</li>
<li>a：涵盖了u、g、o。</li>
</ul>
<p>使用三种权限来描述不同的文件访问权限：</p>
<ul>
<li>r：表示读权限。</li>
<li>w：表示写权限。</li>
<li>x：表示执行权限。</li>
</ul>
<p>使用三种符号来描述权限操作：</p>
<ul>
<li>+：为某文件&#x3D;&#x3D;追加&#x3D;&#x3D;某权限。</li>
<li>-：为某文件&#x3D;&#x3D;减少&#x3D;&#x3D;某权限。</li>
<li>&#x3D;：将某文件&#x3D;&#x3D;设置&#x3D;&#x3D;为某权限。</li>
</ul>
<h3 id="举例-6"><a href="#举例-6" class="headerlink" title="举例"></a>举例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将所有者的权限设置为写，组成员权限设置为读，其他成员权限设置为执行</span></span><br><span class="line">chmod u=w,g=r,o=x temp tem.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为所有者添加读权限，组成员添加执行权限，删除其他成员的执行权限</span></span><br><span class="line">chmod u+r,g+x,o-x temp tem.txt</span><br></pre></td></tr></table></figure>

<h2 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h2><table>
<thead>
<tr>
<th>用法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>umask</td>
<td>显示当前创建文件的权限掩码</td>
</tr>
<tr>
<td>umask -S</td>
<td>用符号形式显示当前掩码</td>
</tr>
<tr>
<td>umask [掩码]</td>
<td>设置新的权限掩码</td>
</tr>
</tbody></table>
<ol>
<li>umask 也可以使用符号模式来设置掩码。</li>
<li>umask 使用数字模式显示的掩码可能是 <code>0002</code> ，其中首位的 0 表示八进制。</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://moon2702.github.io">moon2702</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://moon2702.github.io/2024/07/30/Linux%20%E5%91%BD%E4%BB%A4%20%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3/">http://moon2702.github.io/2024/07/30/Linux 命令 文件相关/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://moon2702.github.io" target="_blank">MOON</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2024/07/21/l7A41mHsp9PDS6W.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/08/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%AE%E5%BD%95%E6%98%BE%E7%A4%BA%E5%B1%82%E7%BA%A7/" title="自定义目录显示层级"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">自定义目录显示层级</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/30/Redis%20%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/" title="Redis 相关命令"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Redis 相关命令</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/08/08/Linux%20%E5%91%BD%E4%BB%A4%20%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3/" title="Linux 命令 用户相关"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-08</div><div class="title">Linux 命令 用户相关</div></div></a></div><div><a href="/2024/08/08/Linux%20%E5%91%BD%E4%BB%A4%20%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/" title="Linux 命令 系统相关"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-08</div><div class="title">Linux 命令 系统相关</div></div></a></div><div><a href="/2024/08/14/Linux%20%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%AE%9E%E4%BE%8B/" title="Linux 软件安装实例"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-14</div><div class="title">Linux 软件安装实例</div></div></a></div><div><a href="/2024/08/13/Linux%20%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95/" title="Linux 软件安装方法"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-13</div><div class="title">Linux 软件安装方法</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><script>var config = {
  tocMaxDepth: 2
};</script><script src="../../../source/js/main.js"></script><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%88%9B%E5%BB%BA%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">文件创建和使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9F%A5%E9%98%85"><span class="toc-number">2.</span> <span class="toc-text">文件查阅</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cat"><span class="toc-number">2.1.</span> <span class="toc-text">cat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#head"><span class="toc-number">2.2.</span> <span class="toc-text">head</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tail"><span class="toc-number">2.3.</span> <span class="toc-text">tail</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#less"><span class="toc-number">2.4.</span> <span class="toc-text">less</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#find"><span class="toc-number">2.5.</span> <span class="toc-text">find</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%BB%9F%E8%AE%A1"><span class="toc-number">3.</span> <span class="toc-text">文件统计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ls"><span class="toc-number">3.1.</span> <span class="toc-text">ls</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#grep"><span class="toc-number">3.2.</span> <span class="toc-text">grep</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk"><span class="toc-number">3.3.</span> <span class="toc-text">awk</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed"><span class="toc-number">3.4.</span> <span class="toc-text">sed</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#wc"><span class="toc-number">3.5.</span> <span class="toc-text">wc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sort"><span class="toc-number">3.6.</span> <span class="toc-text">sort</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text">文件权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#chmod"><span class="toc-number">4.1.</span> <span class="toc-text">chmod</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#umask"><span class="toc-number">4.2.</span> <span class="toc-text">umask</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2024/07/25/mkzJEb7GqutfaF3.png')"><div id="footer-wrap"><div class="copyright">&copy;2024 By moon2702</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div></div></body></html>